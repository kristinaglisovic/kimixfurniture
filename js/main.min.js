var url=window.location.href;const baseurl="data/";function ajaxCallBack(url,method,result){$.ajax({url:url,method:method,dataType:"json",success:result,error:function(xhr){console.log(xhr)}})}function rating(){var izabrano=document.querySelector("#rate").value,productForSortbyRate=JSON.parse(localStorage.getItem("productsLocal"));"LB"==izabrano?productForSortbyRate=productForSortbyRate.sort((function(a,b){return a.brojZvezdica-b.brojZvezdica})):"BL"==izabrano&&(productForSortbyRate=productForSortbyRate.sort((function(a,b){return b.brojZvezdica-a.brojZvezdica}))),productIspis(productForSortbyRate)}function sortiranje(){var izabrano=document.querySelector("#selected").value,productForSort=JSON.parse(localStorage.getItem("productsLocal"));"izaberi"==izabrano?ajaxCallBack("data/proizvodi.json","GET",(function(result){productIspis(result)})):"rastuceCena"==izabrano?productForSort=productForSort.sort((function(a,b){return a.cena-b.cena})):"opadajuceCena"==izabrano?productForSort=productForSort.sort((function(a,b){return b.cena-a.cena})):"rastuceNaziv"==izabrano?productForSort=productForSort.sort((function(a,b){return a.naslov>b.naslov?1:a.naslov<b.naslov?-1:0})):"opadajuceNaziv"==izabrano&&(productForSort=productForSort.sort((function(a,b){return a.naslov>b.naslov?-1:a.naslov<b.naslov?1:0}))),productIspis(productForSort)}function typing(){let tekst=document.getElementById("text");const slova=["W","E","L","C","O","M","E"," ","T","O"," ","O","U","R"," ","S","H","O","P"];setTimeout(()=>slova.forEach((slova,i)=>{setTimeout(()=>{tekst.innerHTML+=slova},500*i)}),500)}function ispisSocial(){let socWrapper=document.querySelector(".social-info"),ispisSoc="";const mreze=["fa fa-instagram","fa fa-facebook","fa fa-google","fa fa-linkedin"],linkovi=["www.instagram.com","www.facebook.com","https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=kimixphotography@gmail.com","www.linkedin.com"];for(let i=0;i<mreze.length;i++)ispisSoc+=`<a href = "${linkovi[i]}"><i class="${mreze[i]}" aria-hidden="true"></i></a> `;socWrapper.innerHTML=ispisSoc}function newsletter(){let newsWrapper,ispisNews='<div class="container">\n        <div class="row align-items-center">\n            \x3c!-- Newsletter Text --\x3e\n            <div class="col-12 col-lg-6 col-xl-7">\n                <div class="newsletter-text mb-100">\n                <h2>Subscribe for a <span>25% Discount</span></h2>\n        <p>Enter your email to get a discount</p>\n                </div>\n            </div>\n            \x3c!-- Newsletter Form --\x3e\n            <div class="col-12 col-lg-6 col-xl-5">\n                <div class="newsletter-form mb-100">\n                    <form>\n                        <input type="email" name="email" class="nl-email text-center" placeholder="Your E-mail">\n                        <input type="button" class="btn amado-btn w-100" id="newsSend" value="Subscribe">\n                    </form>\n                </div>\n                </div>\n            </div>\n        </div>\n    </div>';document.querySelector(".newsletter-area").innerHTML=ispisNews}function ispisFooterNav(data){let footerNav=document.querySelector("#footerNavContent"),ispisFooter='<ul class="navbar-nav ml-auto">';for(let i=0;i<data.length;i++)ispisFooter+=`<li class="nav-item">\n                    <a class="nav-link" href="${data[i].putanja}">${data[i].naziv}</a>\n               </li>`;ispisFooter+="</ul>",footerNav.innerHTML=ispisFooter}function ispisiNavigaciju(data){let navHolder=document.querySelector(".amado-nav"),ispis="<ul>";for(let i=0;i<data.length;i++)ispis+=`<li>\n        <a href="${data[i].putanja}">${data[i].naziv}</a>\n        </li>`;ispis+="</ul>",navHolder.innerHTML=ispis}function zvezdice(brojZvezdica){let html="";for(let i=1;i<=5;i++)html+=i<=brojZvezdica?'<i class="fas fa-star"></i>':'<i class="far fa-star"></i>';return html}function productIspis(data){let prodWrapp=document.querySelector(".produktiIspis"),ispis="";data.forEach(product=>{ispis+=`<div class="col-12 col-sm-6 col-md-12 col-xl-6 prikaz">\n        <div class="single-product-wrapper">\n            \x3c!-- Product Image --\x3e\n            <div class="product-img">\n                <img src="${product.slika.putanjaSlike}" alt="${product.slika.alt}">\n            </div>\n\n            \x3c!-- Product Description --\x3e\n            <div class="product-description d-flex align-items-center justify-content-between">\n                \x3c!-- Product Meta Data --\x3e\n                <div class="product-meta-data">\n                    <div class="line"></div>\n                    <p class="product-price">$${product.cena}</p>\n                        <h6>${product.naslov}</h6>\n                </div>\n                \x3c!-- Ratings & Cart --\x3e\n                <div class="ratings-cart text-right">\n                    <div class="ratings">\n                    ${zvezdice(product.brojZvezdica)}\n                    </div>\n                    <div class="cart">\n                        <a href="" class="add-to-cart" data-toggle="modal" data-target="#staticBackdrop" data-placement="left" title="Add to Cart"><img src="img/core-img/cart.png" alt="cart"></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>`}),prodWrapp.innerHTML=ispis;var productsLocal=JSON.stringify(data);localStorage.setItem("productsLocal",productsLocal);var productCart=JSON.parse(localStorage.getItem("productsLocal")),carts=document.querySelectorAll(".add-to-cart");for(let i=0;i<carts.length;i++)carts[i].addEventListener("click",()=>{cartNumbers(productCart[i]),totalCost(productCart[i])})}function onLoadNumbers(){let productNumbers=localStorage.getItem("cartNumbers");productNumbers&&(document.querySelector(".cart-nav span").textContent=productNumbers)}function cartNumbers(product){let productNumbers=localStorage.getItem("cartNumbers");productNumbers=parseInt(productNumbers),productNumbers?(localStorage.setItem("cartNumbers",productNumbers+1),document.querySelector(".cart-nav span").textContent=productNumbers+1):(localStorage.setItem("cartNumbers",1),document.querySelector(".cart-nav span").textContent=1),setItems(product)}function setItems(product){let cartItems=localStorage.getItem("productsInCart");cartItems=JSON.parse(cartItems),null!=cartItems?(null==cartItems[product.tag]&&(cartItems={...cartItems,[product.tag]:product}),cartItems[product.tag].incart+=1):(product.incart=1,cartItems={[product.tag]:product}),localStorage.setItem("productsInCart",JSON.stringify(cartItems))}function totalCost(product){let cartCost=localStorage.getItem("totalCost");null!=cartCost?(cartCost=parseInt(cartCost),localStorage.setItem("totalCost",cartCost+product.cena)):localStorage.setItem("totalCost",product.cena)}function pretraga(){var uneto=this.value.toLowerCase();ajaxCallBack("data/proizvodi.json","GET",(function(result){const pretrazeno=result.filter((function(p){if(-1!=p.naslov.toLowerCase().indexOf(uneto))return!0}));productIspis(pretrazeno)}))}function ispisKategorija(data){let ispis="<ul>";data.forEach(element=>{ispis+=`<li><a href="#" class="cat" data-idkat="${element.categId}">${element.name}</a></li>`}),ispis+="</ul>",document.querySelector(".catagories-menu").innerHTML=ispis,$(".catagories-menu ul li a").click(filtrirajProizvodePoKategoriji)}function filtrirajProizvodePoKategoriji(e){e.preventDefault();const idKat=this.dataset.idkat;ajaxCallBack("data/proizvodi.json","GET",(function(result){const filtriraniProizvodi=result.filter((function(c){if(c.categId==idKat)return c}));productIspis(filtriraniProizvodi)}))}function brands(data){let brandsWrapp=document.querySelector(".brendoviDrzac"),ispis="<ul>";data.forEach(element=>{ispis+=`<li><a href="#" class="brendovi" data-idkat="${element.brandId}">${element.name}</a></li>`}),ispis+="</ul>",brandsWrapp.innerHTML=ispis,$(".brendovi").click(filterPoBrendu)}function filterPoBrendu(e){e.preventDefault();const idBrend=this.dataset.idkat;ajaxCallBack("data/proizvodi.json","GET",(function(result){const filtriraniPostovi=result.filter((function(b){if(b.categId==idBrend)return b}));productIspis(filtriraniPostovi)}))}function validate(){var successPanel=$("#success");successPanel.hide();let formData=[],btnSend;$("#btnSend").click((function(){let firstName=$("#first_name"),lastName=$("#last_name"),email=$("#email"),message=$("#Msg"),regIme=/^[A-ZČĆŠĐŽ][a-zčćšđž]{2,18}$/,regPrezime=/^[A-ZČĆŠĐŽ][a-zčćšđž]{2,20}$/,regEmail=/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/,regPoruka=/^([1-zćčžđšA-ZČĆŠĐŽ0-1@.\s]{1,255})$/,errors=[],errorMsg="";""==firstName.val()?(firstName.css({border:"2px solid red"}),firstName.val(""),errorMsg="First name can't be empty",firstName.attr("placeholder",errorMsg),errors.push(errorMsg)):regIme.test(firstName.val())?(firstName.css({border:"2px solid #64a19d"}),formData.push(firstName.val())):(firstName.css({border:"2px solid red"}),firstName.val(""),errorMsg="eg. Marko",firstName.attr("placeholder",errorMsg),errors.push(errorMsg)),""==lastName.val()?(lastName.css({border:"2px solid red"}),lastName.val(""),errorMsg="Last name can't be empty",lastName.attr("placeholder",errorMsg),errors.push(errorMsg)):regPrezime.test(lastName.val())?(lastName.css({border:"2px solid #64a19d"}),formData.push(lastName.val())):(lastName.css({border:"2px solid red"}),lastName.val(""),errorMsg="eg. Marković",lastName.attr("placeholder",errorMsg),errors.push(errorMsg)),""==email.val()?(email.css({border:"2px solid red"}),email.val(""),errorMsg="Email can't be empty",email.attr("placeholder",errorMsg),errors.push(errorMsg)):regEmail.test(email.val())?(email.css({border:"2px solid #64a19d"}),formData.push(email.val())):(email.css({border:"2px solid red"}),email.val(""),errorMsg="eg. somebody@example.com",email.attr("placeholder",errorMsg),errors.push(errorMsg)),""==message.val()||"Message can't be empty"==message.val()?(message.css({border:"2px solid red"}),message.val(""),errorMsg="Message can't be empty",message.attr("placeholder",errorMsg),errors.push(errorMsg)):regPoruka.test(message.val())?(message.css({border:"2px solid #64a19d"}),formData.push(message.val())):(message.css({border:"2px solid red"}),message.val(""),errorMsg="Message can't contain malicious code",message.attr("placeholder",errorMsg),errors.push(errorMsg)),0==errors.length&&(successPanel.fadeIn(),setTimeout(()=>{successPanel.html("")},7e3))}))}function validateNews(){let email=$(".nl-email"),regEmail=/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/,errors=[],errorMsg="";""==email.val()?(email.css({border:"2px solid red"}),email.val(""),errorMsg="Email can't be empty",email.attr("placeholder",errorMsg),errors.push(errorMsg)):regEmail.test(email.val())?(email.css({border:"2px solid #64a19d"}),formData.push(email.val())):(email.css({border:"2px solid red"}),email.val(""),errorMsg="eg. somebody@example.com",email.attr("placeholder",errorMsg),errors.push(errorMsg))}window.onload=function(){ajaxCallBack("data/menu.json","GET",(function(result){ispisiNavigaciju(result),ispisFooterNav(result)})),ispisSocial(),newsletter(),$("#newsSend").click(validateNews),"https://kimixfurniture.netlify.app/index.html"==url&&(typing(),onLoadNumbers()),"https://kimixfurniture.netlify.app/"==url?(typing(),onLoadNumbers()):"https://kimixfurniture.netlify.app/shop.html"==url?(ajaxCallBack("data/categories.json","GET",(function(result){ispisKategorija(result)})),ajaxCallBack("data/brands.json","GET",(function(result){brands(result)})),ajaxCallBack("data/proizvodi.json","GET",(function(result){productIspis(result),zvezdice(result)})),document.getElementById("search").addEventListener("keyup",pretraga),onLoadNumbers()):"https://kimixfurniture.netlify.app/cart.html"==url?onLoadNumbers():"https://kimixfurniture.netlify.app/checkout.html"==url&&(validate(),onLoadNumbers())};